const s=()=>({calendarItem:{},calendarEventItemProxy:{},parseDateTime(t,i,e){const a=new Date(t.start);let n=null;return t.is_all_day===!0?n={year:"numeric",month:"2-digit",day:"2-digit"}:n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},a.toLocaleString(i,n)},inviteStatus(t,i){t.status=i,this.calendarItem.resourceEditable===!1&&this.calendarClick(this.calendars.find(a=>a.resourceEditable===!0));const e=this.calendar.getEventById(t.calendar_event.id);(i==="accepted"||i==="maybe")&&!e?this.calendar.addEvent(t.calendar_event,this.calendar.getEventSourceById(this.calendarId)):i==="declined"&&e&&e.remove(),this.$wire.inviteStatus(t.id,i,this.calendarId)},calendarClick(t){this.calendarId=t.id,this.calendarItem=t},editCalendar(t){this.calendarItem=t,this.$wire.editCalendar(t)},saveCalendar(){this.$wire.saveCalendar(this.calendarItem).then(t=>{if(t===!1)return!1;let i=this.calendars.findIndex(e=>e.id===t.id);this.calendars.splice(i,i!==-1?1:0,t),this.calendarId=t.id,this.activeCalendars.push(t.id),typeof this.close=="function"&&this.close()})},deleteCalendar(){this.$wire.deleteCalendar(this.calendarItem).then(t=>{t&&this.close(),this.calendar.getEventSourceById(this.calendarItem.id).remove(),this.calendars.splice(this.calendars.findIndex(i=>i.id===this.calendarItem.id),1)})},saveEvent(){this.$wire.saveEvent(this.$wire.calendarEvent).then(t=>{var i;if(t===!1)return!1;(i=this.$wire.calendarEvent)!=null&&i.id||this.calendar.addEvent(t,this.calendar.getEventSourceById(t.calendar_id)),typeof this.close=="function"&&this.close()})},setDateTime(t,i){const e=i.target.parentNode.parentNode.parentNode.querySelector('input[type="date"]').value;let a=i.target.parentNode.parentNode.parentNode.querySelector('input[type="time"]').value;this.$wire.calendarEvent.allDay&&(a="00:00:00");let n=dayjs(e+" "+a);t==="start"?this.$wire.calendarEvent.start=n.format():this.$wire.calendarEvent.end=n.format()},deleteEvent(){this.$wire.deleteEvent(this.$wire.calendarEvent).then(t=>{t&&this.close(),this.calendarEventItemProxy.remove()})},calendar:null,config:{},id:null,calendarId:null,calendars:[],invites:[],activeCalendars:[],calendarEvent:{},dispatchCalendarEvents(t,i){const e=t.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();this.$wire.dispatch(`calendar-${e}`,i)},getCalendarEventSources(){return this.calendars.forEach(t=>{this.calendarId===null&&(this.calendarId=t.id),t.events=i=>this.$wire.getEvents(i,t),this.activeCalendars.push(t.id)}),this.calendars},toggleEventSource(t){const i=this.calendar.getEventSourceById(t.id);i?i.remove():this.calendar.addEventSource(t)},init(){this.id=this.$id("calendar"),this.$wire.getCalendars().then(t=>{this.calendars=t}),this.$wire.getConfig().then(t=>{this.config=t,this.initCalendar()}),this.$wire.getInvites().then(t=>{this.invites=t})},initCalendar(){let t=document.getElementById(this.id),i={plugins:[dayGridPlugin,timeGridPlugin,listPlugin,interactionPlugin],initialView:"dayGridMonth",initialDate:new Date,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventSources:this.getCalendarEventSources(),select:e=>{this.dispatchCalendarEvents("select",e)},unselect:(e,a)=>{this.dispatchCalendarEvents("unselect",{jsEvent:e,view:a})},dateClick:e=>{this.$wire.onDateClick(e),this.dispatchCalendarEvents("dateClick",e)},eventDidMount:e=>{this.dispatchCalendarEvents("eventDidMount",e)},eventClick:e=>{this.$wire.onEventClick(e),this.dispatchCalendarEvents("eventClick",e)},eventMouseEnter:e=>{this.dispatchCalendarEvents("eventMouseEnter",e)},eventMouseLeave:e=>{this.dispatchCalendarEvents("eventMouseLeave",e)},eventDragStart:e=>{this.$wire.onEventDragStart(e),this.dispatchCalendarEvents("eventDragStart",e)},eventDragStop:e=>{this.$wire.onEventDragStop(e),this.dispatchCalendarEvents("eventDragStop",e)},eventDrop:e=>{this.$wire.onEventDrop(e),this.dispatchCalendarEvents("eventDrop",e)},eventResizeStart:e=>{this.dispatchCalendarEvents("eventResizeStart",e)},eventResizeStop:e=>{this.dispatchCalendarEvents("eventResizeStop",e)},eventResize:e=>{this.dispatchCalendarEvents("eventResize",e)},drop:e=>{this.dispatchCalendarEvents("drop",e)},eventReceive:e=>{this.dispatchCalendarEvents("eventReceive",e)},eventLeave:e=>{this.dispatchCalendarEvents("eventLeave",e)},eventAdd:e=>{this.dispatchCalendarEvents("eventAdd",e)},eventChange:e=>{this.dispatchCalendarEvents("eventChange",e)},eventRemove:e=>{this.dispatchCalendarEvents("eventRemove",e)},eventsSet:e=>{this.dispatchCalendarEvents("eventsSet",e)}};this.calendar=new Calendar(t,{...i,...this.config}),this.calendar.render()}});export{s as c};
